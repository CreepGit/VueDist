{"version":3,"file":"js/347.1f0fbacc.js","mappings":"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","sources":["webpack://hello-world/./src/views/ChatView.vue","webpack://hello-world/./src/views/ChatView.vue?fcb5"],"sourcesContent":["<template>\r\n  <h2>4CHAT</h2>\r\n  <span>Connection: {{ connection_good ? 'alive' : 'dead' }}</span>\r\n  <br>\r\n  <span>Users: {{ connected_users }}</span>\r\n  <br>\r\n  <div class=\"chatlist\">\r\n    <table class=\"tableclass\">\r\n      <tr>\r\n        <th class=\"author_col\">Author</th>\r\n        <th>Message</th>\r\n      </tr>\r\n      <tr v-for=\"(message, i) in messages\" :key=\"i\">\r\n        <td class=\"author_col\">\r\n          {{message[0]||\"FAILED\"}}\r\n        </td>\r\n        <td>\r\n          {{message[1]||\"FAILED\"}}\r\n        </td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n  <form action=\"wss://websocket-server.creepreplit.repl.co/\" @submit.prevent=\"sendMessage\">\r\n    <input ref=\"textInput\" style=\"width: 400px\" type=\"text\" :disabled=!connection_good>\r\n    <input type=\"submit\" :disabled=!connection_good>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {return {\r\n    connection: null,\r\n    messages: [],\r\n    reconnector: null,\r\n    connected_users: 0,\r\n    connection_good: false,\r\n  }},\r\n  mounted() {\r\n    this.connect()\r\n  },\r\n  unmounted() {\r\n    this.connection.close(1000);\r\n  },\r\n  watch: {\r\n    connection(now) {\r\n      if (now == null) {\r\n        this.start_reconnector()\r\n      } else {\r\n        clearInterval(this.reconnector)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    connect() {\r\n      this.connection = new WebSocket(\"wss://websocket-server.creepreplit.repl.co/\");\r\n      this.connection.onmessage = (data) => {\r\n        const msg = JSON.parse(data.data)\r\n        if (msg[\"type\"] == \"message\")\r\n          this.messages.push([msg[\"author\"], msg[\"content\"]])\r\n        else if (msg[\"type\"] == 'info')\r\n          this.connected_users = msg[\"user_count\"]\r\n        else {\r\n          this.messages.push([\"CLIENT\", \"Got bad data\"])\r\n          console.log(\"BAD DATA\", msg)\r\n        }\r\n      }\r\n      this.connection.onclose = () => {\r\n        this.connection = null\r\n        this.messages.push([\"CLIENT\", \"CONNECTION FAILED\"])\r\n        this.connection_good = false\r\n      }\r\n      this.connection.onopen = () => {\r\n        this.messages.push([\"CLIENT\", \"CONNECTED\"])\r\n        this.connection.send(JSON.stringify({\"type\": \"info\"}))\r\n        this.connection_good = true\r\n      }\r\n    },\r\n    sendMessage() {\r\n      const textInput = this.$refs.textInput\r\n      const msg = textInput.value\r\n      textInput.value = \"\"\r\n      this.connection.send(JSON.stringify({\r\n        \"type\": \"message\",\r\n        \"content\": msg,\r\n      }))\r\n    },\r\n    start_reconnector() {\r\n      this.reconnector = setInterval(() => {\r\n        this.messages.push([\"CLIENT\", \"RECONNECTING\"])\r\n        this.connect()\r\n      }, 5000)\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chatlist {\r\n  max-height: calc(100vh - 200px);\r\n  overflow-y: scroll;\r\n  max-width: 750px;\r\n  margin: 30px auto;\r\n  border: 1px solid black;\r\n  padding: 30px;\r\n  border-radius: 25px;\r\n  list-style: none;\r\n}\r\n.chatlist::-webkit-scrollbar {\r\n  width: 10px;\r\n}\r\n.tableclass {\r\n  width: 100%;\r\n}\r\n.tableclass tr {\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.tableclass tr:hover {\r\n  background: #eee;\r\n}\r\n.author_col {\r\n  width: 25%;\r\n}\r\n</style>","import { render } from \"./ChatView.vue?vue&type=template&id=1d053821&scoped=true\"\nimport script from \"./ChatView.vue?vue&type=script&lang=js\"\nexport * from \"./ChatView.vue?vue&type=script&lang=js\"\n\nimport \"./ChatView.vue?vue&type=style&index=0&id=1d053821&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Omistaja\\\\Desktop\\\\Webstuff\\\\hello-world\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1d053821\"]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_hoisted_1","_toDisplayString","$data","_hoisted_2","_hoisted_3","_hoisted_6","_createElementBlock","_Fragment","_renderList","message","i","key","action","onSubmit","$options","ref","style","type","disabled","data","connection","messages","reconnector","connected_users","connection_good","mounted","this","connect","unmounted","close","watch","now","start_reconnector","clearInterval","methods","WebSocket","onmessage","msg","JSON","parse","push","console","log","onclose","onopen","send","stringify","sendMessage","textInput","$refs","value","setInterval","__exports__","render"],"sourceRoot":""}