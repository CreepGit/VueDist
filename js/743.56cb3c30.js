"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[743],{743:function(t,s,e){e.r(s),e.d(s,{default:function(){return I}});var n=e(252),o=e(577),c=e(963);const a=t=>((0,n.dD)("data-v-648ac8b8"),t=t(),(0,n.Cn)(),t),i={class:"banner"},l=a((()=>(0,n._)("div",{class:"logo"},[(0,n._)("img",{src:"https://logos-world.net/wp-content/uploads/2021/02/4chan-Emblem.png",alt:""}),(0,n._)("span",null,"4chat")],-1))),u={class:"status"},r={class:"statusTex"},h={class:"chatlist"},d={class:"tableclass"},p=a((()=>(0,n._)("tr",null,[(0,n._)("th",{class:"author_col"},"Author"),(0,n._)("th",null,"Message")],-1))),g={class:"author_col"},_=["disabled"],m=["disabled"];function b(t,s,e,a,b,f){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",i,[l,(0,n._)("div",u,[(0,n._)("div",{class:"statusIndicator",style:(0,o.j5)({background:f.indicatorColor})},null,4),(0,n._)("span",r,(0,o.zw)(b.statusText||"Loading"),1)])]),(0,n._)("div",h,[(0,n._)("table",d,[p,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(b.messages,((t,s)=>((0,n.wg)(),(0,n.iD)("tr",{key:s},[(0,n._)("td",g,(0,o.zw)(t[0]||"FAILED"),1),(0,n._)("td",null,(0,o.zw)(t[1]||"FAILED"),1)])))),128))])]),(0,n._)("form",{class:"inputs",action:"wss://websocket-server.creepreplit.repl.co/",onSubmit:s[0]||(s[0]=(0,c.iM)(((...t)=>f.sendMessage&&f.sendMessage(...t)),["prevent"]))},[(0,n._)("input",{class:"textInput",ref:"textInput",type:"text",disabled:!f.canMessage},null,8,_),(0,n._)("input",{class:"submitInput",type:"submit",disabled:!f.canMessage},null,8,m)],32)],64)}var f={data(){return{connection:null,messages:[],reconnector:null,connected_users:0,connectionStatus:2,statusText:"Loading"}},mounted(){this.connect()},unmounted(){this.connection.close(1e3)},watch:{connection(t){null==t?this.start_reconnector():clearInterval(this.reconnector)}},methods:{connect(){this.connection=new WebSocket("wss://websocket-server.creepreplit.repl.co/"),this.connection.onmessage=t=>{const s=JSON.parse(t.data);"message"==s["type"]?this.messages.push([s["author"],s["content"]]):"info"==s["type"]?this.statusText=`Online ${s["user_count"]}`:(this.messages.push(["CLIENT","Got bad data"]),console.log("BAD DATA",s))},this.connection.onclose=()=>{this.connection=null,this.messages.push(["CLIENT","CONNECTION FAILED"]),this.connectionStatus=0,this.statusText="Offline"},this.connection.onopen=()=>{this.messages.push(["CLIENT","CONNECTED"]),this.connection.send(JSON.stringify({type:"info"})),this.connectionStatus=1}},sendMessage(){const t=this.$refs.textInput,s=t.value;t.value="",this.connection.send(JSON.stringify({type:"message",content:s}))},start_reconnector(){this.reconnector=setInterval((()=>{this.connectionStatus=2,this.messages.push(["CLIENT","RECONNECTING"]),this.connect()}),5e3)}},computed:{indicatorColor(){return 0==this.connectionStatus?"#f33":1==this.connectionStatus?"#8f2":"#fff"},canMessage(){return 1==this.connectionStatus}}},w=e(744);const v=(0,w.Z)(f,[["render",b],["__scopeId","data-v-648ac8b8"]]);var I=v}}]);
//# sourceMappingURL=743.56cb3c30.js.map