"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[501],{501:function(i,t,e){e.r(t),e.d(t,{default:function(){return f}});var s=e(252),r=e(963),h=e(577);const o={class:"game"},n=["onClick","onMousedown"],l={key:0,class:"indicator"},d={key:1,class:"bi bi-flag-fill"},a={key:2,class:"bi bi-heartbreak-fill"},g=(0,s.Uk)("Index");function _(i,t,e,_,c,p){const m=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[(0,s._)("table",{onContextmenu:t[0]||(t[0]=(0,r.iM)((()=>{}),["prevent"]))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.grid_h,(i=>((0,s.wg)(),(0,s.iD)("tr",{key:i},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.grid_w,(t=>((0,s.wg)(),(0,s.iD)("td",{key:t},[(0,s._)("div",{class:(0,h.C_)(["cell",{"open-cell":p.tryGet(c.isOpen_grid,t-1,i-1,!1)}]),onClick:e=>p.click(t-1,i-1),onMousedown:(0,r.iM)((e=>p.rclick(t-1,i-1)),["right","prevent"])},["T"==p.getDisplayType(t-1,i-1)?((0,s.wg)(),(0,s.iD)("span",l,(0,h.zw)(p.getDisplayCharacter(t-1,i-1)),1)):(0,s.kq)("",!0),"F"==p.getDisplayType(t-1,i-1)?((0,s.wg)(),(0,s.iD)("i",d)):(0,s.kq)("",!0),"B"==p.getDisplayType(t-1,i-1)?((0,s.wg)(),(0,s.iD)("i",a)):(0,s.kq)("",!0)],42,n)])))),128))])))),128))],32),(0,s._)("span",null,(0,h.zw)(c.display_time),1)]),(0,s.Wm)(m,{to:"/",id:"backlink"},{default:(0,s.w5)((()=>[g])),_:1})],64)}var c=e(2),p={data(){return{visible_grid:[["",""],[]],hidden_grid:[["","B",3],[4,5,6]],isOpen_grid:[[!1,!1],[!1,!1]],grid_w:9,grid_h:9,bombs:20,generate_grid_on_click:!0,game_over:!1,start_time:0,timer_loop:null,display_time:"00:00.00"}},methods:{randomNumber(i,t){return Math.floor(Math.random()*(t-i+1)+i)},getNeighbours(i,t){let e=[];const s=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];for(const r of s){const s=r[0]+i,h=r[1]+t;s<0||(h<0||s>this.grid_w-1||h>this.grid_h-1||e.push([s,h]))}return e},tryGet(i,t,e,s=""){let r=i[e];return void 0===r?s:(r=r[t],void 0===r?s:r)},getDisplayType(i,t){return"F"===this.getDisplayCharacter(i,t)?"F":"B"===this.getDisplayCharacter(i,t)?"B":"T"},getDisplayCharacter(i,t){return this.tryGet(this.visible_grid,i,t,"")},click(i,t){this.game_over||"F"!==this.tryGet(this.visible_grid,i,t,"")&&(this.generate_grid_on_click&&(this.generateGrid(i,t),this.generate_grid_on_click=!1,this.startTime()),this.popOpen(i,t))},rclick(i,t){this.game_over||this.generate_grid_on_click||this.isOpen_grid[t][i]||(""===this.visible_grid[t][i]?this.visible_grid[t][i]="F":"F"===this.visible_grid[t][i]&&(this.visible_grid[t][i]=""))},popOpen(i,t){if(this.isOpen_grid[t][i])return;const e=this.hidden_grid[t][i];if(this.visible_grid[t][i]=e,this.isOpen_grid[t][i]=!0,""===e)for(const s of this.getNeighbours(i,t)){const i=s[0],t=s[1];this.isOpen_grid[t][i]||this.popOpen(i,t)}else"B"===e&&this.loseGame();this.checkWinGame()},loseGame(){this.endGame();for(let i=0;i<this.grid_h;i++)for(let t=0;t<this.grid_w;t++){const e=this.hidden_grid[i][t],s=this.visible_grid[i][t];"F"===s&&"B"===e||(this.visible_grid[i][t]=e)}},checkWinGame(){let i=0;for(let t=0;t<this.grid_h;t++)for(let e=0;e<this.grid_w;e++)"B"!==this.hidden_grid[t][e]&&(this.isOpen_grid[t][e]||i++);0===i&&this.winGame()},endGame(){this.game_over=!0,this.stopTimer()},winGame(){if(!this.game_over){this.endGame();for(let i=0;i<this.grid_h;i++)for(let t=0;t<this.grid_w;t++){let e=this.hidden_grid[i][t];"B"===e&&(e="F"),this.visible_grid[i][t]=e,this.isOpen_grid[i][t]=!0}this.$confetti.addConfetti(),(0,c.pm)()(`You won in ${this.display_time}`,{timeout:1e4})}},generateGrid(i,t){let e=[],s=[],r=[];for(let o=0;o<this.grid_h;o++){let i=[],t=[],h=[];for(let e=0;e<this.grid_w;e++)i.push(""),t.push(""),h.push(!1);e.push(i),s.push(t),r.push(h)}let h=0;for(let o=0;o<1e5;o++){const s=this.randomNumber(0,this.grid_w-1),r=this.randomNumber(0,this.grid_h-1),o=e[r][s];if(!(Math.abs(i-s)<=1&&Math.abs(t-r)<=1)&&(""===o&&(e[r][s]="B",h++,h>=this.bombs)))break}for(let o=0;o<this.grid_h;o++)for(let i=0;i<this.grid_w;i++){const t=e[o][i];if("B"===t)continue;let s=0;const r=this.getNeighbours(i,o);for(const i of r){const t=i[0],r=i[1];"B"===e[r][t]&&s++}0!==s&&(e[o][i]=""+s)}this.hidden_grid=e,this.visible_grid=s,this.isOpen_grid=r},startTime(){clearInterval(this.timer_loop),this.start_time=+Date.now(),this.timer_loop=setInterval((()=>{this.timerLoopFunction()}),33)},stopTimer(){clearInterval(this.timer_loop),this.timerLoopFunction()},timerLoopFunction(){let i=(+Date.now()-this.start_time)/1e3,t=Math.floor(i/60);t=(t+"").padStart(2,"0");let e=(i%60).toFixed(2);e=(e+"").padStart(5,"0"),this.display_time=t+":"+e}},mounted(){},unmounted(){clearInterval(this.timer_loop)}},m=e(744);const u=(0,m.Z)(p,[["render",_],["__scopeId","data-v-0fc01045"]]);var f=u}}]);
//# sourceMappingURL=501.ae4cb4ab.js.map